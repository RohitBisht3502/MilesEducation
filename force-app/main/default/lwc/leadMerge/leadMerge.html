<template>
    <div style="background: white; border-radius: 8px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        
        <!-- Header -->
        <div style="display: flex; align-items: center; margin-bottom: 24px;">
            <svg style="width: 24px; height: 24px; margin-right: 8px;" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <h2 style="font-size: 18px; font-weight: 600; margin: 0; color: #181818;">Search Lead</h2>
        </div>

        <!-- Search Input and Button -->
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <input 
                type="text"
                value={searchKey}
                oninput={handleChange}
                placeholder="Search by Phone / Name / Email"
                style="flex: 1; max-width: 400px; padding: 8px 12px; border: 1px solid #d0d5dd; border-radius: 6px; font-size: 14px; outline: none;">
            
            <button 
                onclick={handleSearch}
                style="padding: 8px 24px; background: #1570ef; color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: background 0.2s;">
                Search
            </button>
        </div>

        <!-- Search Results -->
        <template if:true={leads.length}>
            <div style="margin-top: 20px;">
                <template for:each={leads} for:item="lead">
                    <div key={lead.Id} 
                         data-id={lead.Id}
                         onclick={handleSelectLead}
                         data-selected={lead.isSelected}
                         style={lead.cardStyle}>
                        
                        <div style="font-weight: 600; font-size: 15px; color: #101828; margin-bottom: 8px;">
                            {lead.Name}
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 4px; color: #667085; font-size: 14px; margin-bottom: 4px;">
                            <svg style="width: 16px; height: 16px; flex-shrink: 0;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                                <path d="m2 7 10 6 10-6"></path>
                            </svg>
                            <span>{lead.Email__c}</span>
                        </div>

                        <div style="display: flex; align-items: center; gap: 4px; color: #667085; font-size: 14px;">
                            <svg style="width: 16px; height: 16px; flex-shrink: 0;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span>{lead.ownerName}</span>
                        </div>
                    </div>
                </template>
            </div>
        </template>

        <!-- Merge Button -->
        <template if:true={showMergeButton}>
            <div style="margin-top: 24px;">
                <button 
                    onclick={handleMerge}
                    style="padding: 10px 24px; background: #125cb7; color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: background 0.2s;">
                    Merge Lead
                </button>
            </div>
        </template>

    </div>
</template>